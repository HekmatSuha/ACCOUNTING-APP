{"ast":null,"code":"var _jsxFileName = \"E:\\\\BizimHesap\\\\accounting-app\\\\frontend\\\\src\\\\pages\\\\ExpenseListPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/pages/ExpenseListPage.js\n\nimport React, { useState, useEffect } from 'react';\nimport axiosInstance from '../utils/axiosInstance';\nimport { Table, Button, Card, Modal, Form, Alert, Row, Col, ListGroup, InputGroup } from 'react-bootstrap';\nimport { FaTrash } from 'react-icons/fa';\n\n// This is the new, self-contained component for managing categories\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CategoryManagerModal = ({\n  show,\n  handleClose,\n  categories,\n  onUpdate\n}) => {\n  _s();\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [error, setError] = useState('');\n  const handleAddCategory = async () => {\n    if (!newCategoryName.trim()) {\n      setError('Category name cannot be empty.');\n      return;\n    }\n    try {\n      setError('');\n      await axiosInstance.post('/expense-categories/', {\n        name: newCategoryName\n      });\n      setNewCategoryName('');\n      onUpdate(); // This refreshes the category list on the main page\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response$data$na;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : (_err$response$data$na = _err$response$data.name) === null || _err$response$data$na === void 0 ? void 0 : _err$response$data$na[0]) || 'A category with this name already exists.');\n    }\n  };\n  const handleDeleteCategory = async categoryId => {\n    if (window.confirm('Are you sure? Deleting a category will not delete its expenses, but they will become uncategorized.')) {\n      try {\n        await axiosInstance.delete(`/expense-categories/${categoryId}/`);\n        onUpdate(); // Refresh list\n      } catch (err) {\n        setError('Could not delete category. It might be protected.');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: handleClose,\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: \"Manage Expense Categories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        onClose: () => setError(''),\n        dismissible: true,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Add New Category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          placeholder: \"e.g., Rent, Utilities...\",\n          value: newCategoryName,\n          onChange: e => setNewCategoryName(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && handleAddCategory()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleAddCategory,\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Existing Categories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        children: categories.map(cat => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          className: \"d-flex justify-content-between align-items-center\",\n          children: [cat.name, /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-danger\",\n            size: \"sm\",\n            onClick: () => handleDeleteCategory(cat.id),\n            children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 29\n          }, this)]\n        }, cat.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: handleClose,\n        children: \"Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n_s(CategoryManagerModal, \"pioWbAkvw2Uw/pHYsiwL8u0EAYo=\");\n_c = CategoryManagerModal;\nconst getTodayDate = () => {\n  const today = new Date();\n  const yyyy = today.getFullYear();\n  const mm = String(today.getMonth() + 1).padStart(2, '0');\n  const dd = String(today.getDate()).padStart(2, '0');\n  return `${yyyy}-${mm}-${dd}`;\n};\nfunction ExpenseListPage() {\n  _s2();\n  const [expenses, setExpenses] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentExpense, setCurrentExpense] = useState(null);\n  const [showCategoryModal, setShowCategoryModal] = useState(false); // State for the new modal\n  const [formData, setFormData] = useState({\n    amount: '',\n    expense_date: getTodayDate(),\n    description: '',\n    category: ''\n  });\n  const [error, setError] = useState('');\n  const fetchData = async () => {\n    try {\n      const [expensesRes, categoriesRes] = await Promise.all([axiosInstance.get('/expenses/'), axiosInstance.get('/expense-categories/')]);\n      setExpenses(expensesRes.data);\n      setCategories(categoriesRes.data);\n    } catch (error) {\n      console.error('Failed to fetch data:', error);\n      setError('Could not fetch expenses or categories.');\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const handleInputChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleShowModal = (expense = null) => {\n    if (expense) {\n      setIsEditing(true);\n      setCurrentExpense(expense);\n      setFormData({\n        amount: expense.amount,\n        expense_date: expense.expense_date,\n        description: expense.description || '',\n        category: expense.category || ''\n      });\n    } else {\n      setIsEditing(false);\n      setCurrentExpense(null);\n      setFormData({\n        amount: '',\n        expense_date: getTodayDate(),\n        description: '',\n        category: ''\n      });\n    }\n    setShowModal(true);\n    setError('');\n  };\n  const handleCloseModal = () => setShowModal(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const url = isEditing ? `/expenses/${currentExpense.id}/` : '/expenses/';\n    const method = isEditing ? 'put' : 'post';\n    const dataToSubmit = {\n      ...formData,\n      category: formData.category ? parseInt(formData.category) : null\n    };\n    try {\n      await axiosInstance[method](url, dataToSubmit);\n      fetchData();\n      handleCloseModal();\n    } catch (err) {\n      var _err$response2;\n      console.error('Failed to save expense:', (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data);\n      setError('Failed to save expense. Please check your input.');\n    }\n  };\n  const handleDelete = async expenseId => {\n    if (window.confirm('Are you sure you want to delete this expense?')) {\n      try {\n        await axiosInstance.delete(`/expenses/${expenseId}/`);\n        fetchData();\n      } catch (error) {\n        console.error('Failed to delete expense:', error);\n        setError('Failed to delete expense.');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        className: \"d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Expenses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            className: \"me-2\",\n            onClick: () => setShowCategoryModal(true),\n            children: \"Manage Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => handleShowModal(),\n            children: \"+ New Expense\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          responsive: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: expenses.map(expense => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: expense.expense_date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: expense.category_name || 'Uncategorized'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: expense.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", parseFloat(expense.amount).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"warning\",\n                  size: \"sm\",\n                  className: \"me-2\",\n                  onClick: () => handleShowModal(expense),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"danger\",\n                  size: \"sm\",\n                  onClick: () => handleDelete(expense.id),\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 37\n              }, this)]\n            }, expense.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: handleCloseModal,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: isEditing ? 'Edit Expense' : 'Add New Expense'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"number\",\n                  name: \"amount\",\n                  value: formData.amount,\n                  onChange: handleInputChange,\n                  required: true,\n                  step: \"0.01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Expense Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"date\",\n                  name: \"expense_date\",\n                  value: formData.expense_date,\n                  onChange: handleInputChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n              name: \"category\",\n              value: formData.category,\n              onChange: handleInputChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Uncategorized\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 33\n              }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: cat.id,\n                children: cat.name\n              }, cat.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 37\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"textarea\",\n              rows: 3,\n              name: \"description\",\n              value: formData.description,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleCloseModal,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleSubmit,\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CategoryManagerModal, {\n      show: showCategoryModal,\n      handleClose: () => setShowCategoryModal(false),\n      categories: categories,\n      onUpdate: fetchData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s2(ExpenseListPage, \"iMQJoAH35Q8+x6isbBEAKqX8IAo=\");\n_c2 = ExpenseListPage;\nexport default ExpenseListPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"CategoryManagerModal\");\n$RefreshReg$(_c2, \"ExpenseListPage\");","map":{"version":3,"names":["React","useState","useEffect","axiosInstance","Table","Button","Card","Modal","Form","Alert","Row","Col","ListGroup","InputGroup","FaTrash","jsxDEV","_jsxDEV","Fragment","_Fragment","CategoryManagerModal","show","handleClose","categories","onUpdate","_s","newCategoryName","setNewCategoryName","error","setError","handleAddCategory","trim","post","name","err","_err$response","_err$response$data","_err$response$data$na","response","data","handleDeleteCategory","categoryId","window","confirm","delete","onHide","centered","children","Header","closeButton","Title","fileName","_jsxFileName","lineNumber","columnNumber","Body","variant","onClose","dismissible","className","Control","placeholder","value","onChange","e","target","onKeyPress","key","onClick","map","cat","Item","size","id","Footer","_c","getTodayDate","today","Date","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","ExpenseListPage","_s2","expenses","setExpenses","setCategories","showModal","setShowModal","isEditing","setIsEditing","currentExpense","setCurrentExpense","showCategoryModal","setShowCategoryModal","formData","setFormData","amount","expense_date","description","category","fetchData","expensesRes","categoriesRes","Promise","all","get","console","handleInputChange","handleShowModal","expense","handleCloseModal","handleSubmit","preventDefault","url","method","dataToSubmit","parseInt","_err$response2","handleDelete","expenseId","striped","bordered","hover","responsive","category_name","parseFloat","toFixed","onSubmit","Group","Label","type","required","step","Select","as","rows","_c2","$RefreshReg$"],"sources":["E:/BizimHesap/accounting-app/frontend/src/pages/ExpenseListPage.js"],"sourcesContent":["// frontend/src/pages/ExpenseListPage.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axiosInstance from '../utils/axiosInstance';\r\nimport { Table, Button, Card, Modal, Form, Alert, Row, Col, ListGroup, InputGroup } from 'react-bootstrap';\r\nimport { FaTrash } from 'react-icons/fa';\r\n\r\n// This is the new, self-contained component for managing categories\r\nconst CategoryManagerModal = ({ show, handleClose, categories, onUpdate }) => {\r\n    const [newCategoryName, setNewCategoryName] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const handleAddCategory = async () => {\r\n        if (!newCategoryName.trim()) {\r\n            setError('Category name cannot be empty.');\r\n            return;\r\n        }\r\n        try {\r\n            setError('');\r\n            await axiosInstance.post('/expense-categories/', { name: newCategoryName });\r\n            setNewCategoryName('');\r\n            onUpdate(); // This refreshes the category list on the main page\r\n        } catch (err) {\r\n            setError(err.response?.data?.name?.[0] || 'A category with this name already exists.');\r\n        }\r\n    };\r\n\r\n    const handleDeleteCategory = async (categoryId) => {\r\n        if (window.confirm('Are you sure? Deleting a category will not delete its expenses, but they will become uncategorized.')) {\r\n            try {\r\n                await axiosInstance.delete(`/expense-categories/${categoryId}/`);\r\n                onUpdate(); // Refresh list\r\n            } catch (err) {\r\n                setError('Could not delete category. It might be protected.');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal show={show} onHide={handleClose} centered>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Manage Expense Categories</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {error && <Alert variant=\"danger\" onClose={() => setError('')} dismissible>{error}</Alert>}\r\n                <h5>Add New Category</h5>\r\n                <InputGroup className=\"mb-3\">\r\n                    <Form.Control\r\n                        placeholder=\"e.g., Rent, Utilities...\"\r\n                        value={newCategoryName}\r\n                        onChange={(e) => setNewCategoryName(e.target.value)}\r\n                        onKeyPress={(e) => e.key === 'Enter' && handleAddCategory()}\r\n                    />\r\n                    <Button variant=\"primary\" onClick={handleAddCategory}>Add</Button>\r\n                </InputGroup>\r\n                <hr />\r\n                <h5>Existing Categories</h5>\r\n                <ListGroup>\r\n                    {categories.map(cat => (\r\n                        <ListGroup.Item key={cat.id} className=\"d-flex justify-content-between align-items-center\">\r\n                            {cat.name}\r\n                            <Button variant=\"outline-danger\" size=\"sm\" onClick={() => handleDeleteCategory(cat.id)}>\r\n                                <FaTrash />\r\n                            </Button>\r\n                        </ListGroup.Item>\r\n                    ))}\r\n                </ListGroup>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={handleClose}>Done</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nconst getTodayDate = () => {\r\n    const today = new Date();\r\n    const yyyy = today.getFullYear();\r\n    const mm = String(today.getMonth() + 1).padStart(2, '0');\r\n    const dd = String(today.getDate()).padStart(2, '0');\r\n    return `${yyyy}-${mm}-${dd}`;\r\n};\r\n\r\nfunction ExpenseListPage() {\r\n    const [expenses, setExpenses] = useState([]);\r\n    const [categories, setCategories] = useState([]);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [currentExpense, setCurrentExpense] = useState(null);\r\n    const [showCategoryModal, setShowCategoryModal] = useState(false); // State for the new modal\r\n    const [formData, setFormData] = useState({\r\n        amount: '',\r\n        expense_date: getTodayDate(),\r\n        description: '',\r\n        category: ''\r\n    });\r\n    const [error, setError] = useState('');\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [expensesRes, categoriesRes] = await Promise.all([\r\n                axiosInstance.get('/expenses/'),\r\n                axiosInstance.get('/expense-categories/')\r\n            ]);\r\n            setExpenses(expensesRes.data);\r\n            setCategories(categoriesRes.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch data:', error);\r\n            setError('Could not fetch expenses or categories.');\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleInputChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleShowModal = (expense = null) => {\r\n        if (expense) {\r\n            setIsEditing(true);\r\n            setCurrentExpense(expense);\r\n            setFormData({\r\n                amount: expense.amount,\r\n                expense_date: expense.expense_date,\r\n                description: expense.description || '',\r\n                category: expense.category || ''\r\n            });\r\n        } else {\r\n            setIsEditing(false);\r\n            setCurrentExpense(null);\r\n            setFormData({\r\n                amount: '',\r\n                expense_date: getTodayDate(),\r\n                description: '',\r\n                category: ''\r\n            });\r\n        }\r\n        setShowModal(true);\r\n        setError('');\r\n    };\r\n\r\n    const handleCloseModal = () => setShowModal(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const url = isEditing ? `/expenses/${currentExpense.id}/` : '/expenses/';\r\n        const method = isEditing ? 'put' : 'post';\r\n        const dataToSubmit = { ...formData, category: formData.category ? parseInt(formData.category) : null };\r\n\r\n        try {\r\n            await axiosInstance[method](url, dataToSubmit);\r\n            fetchData();\r\n            handleCloseModal();\r\n        } catch (err) {\r\n            console.error('Failed to save expense:', err.response?.data);\r\n            setError('Failed to save expense. Please check your input.');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (expenseId) => {\r\n        if (window.confirm('Are you sure you want to delete this expense?')) {\r\n            try {\r\n                await axiosInstance.delete(`/expenses/${expenseId}/`);\r\n                fetchData();\r\n            } catch (error) {\r\n                console.error('Failed to delete expense:', error);\r\n                setError('Failed to delete expense.');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Card>\r\n                <Card.Header className=\"d-flex justify-content-between align-items-center\">\r\n                    <h4>Expenses</h4>\r\n                    <div>\r\n                        {/* Button to open the new category manager */}\r\n                        <Button variant=\"secondary\" className=\"me-2\" onClick={() => setShowCategoryModal(true)}>\r\n                            Manage Categories\r\n                        </Button>\r\n                        <Button variant=\"primary\" onClick={() => handleShowModal()}>\r\n                            + New Expense\r\n                        </Button>\r\n                    </div>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                    <Table striped bordered hover responsive>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Date</th>\r\n                                <th>Category</th>\r\n                                <th>Description</th>\r\n                                <th>Amount</th>\r\n                                <th>Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {expenses.map((expense) => (\r\n                                <tr key={expense.id}>\r\n                                    <td>{expense.expense_date}</td>\r\n                                    <td>{expense.category_name || 'Uncategorized'}</td>\r\n                                    <td>{expense.description}</td>\r\n                                    <td>${parseFloat(expense.amount).toFixed(2)}</td>\r\n                                    <td>\r\n                                        <Button variant=\"warning\" size=\"sm\" className=\"me-2\" onClick={() => handleShowModal(expense)}>Edit</Button>\r\n                                        <Button variant=\"danger\" size=\"sm\" onClick={() => handleDelete(expense.id)}>Delete</Button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </Table>\r\n                </Card.Body>\r\n            </Card>\r\n\r\n            <Modal show={showModal} onHide={handleCloseModal}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{isEditing ? 'Edit Expense' : 'Add New Expense'}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Row>\r\n                            <Col>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Amount</Form.Label>\r\n                                    <Form.Control type=\"number\" name=\"amount\" value={formData.amount} onChange={handleInputChange} required step=\"0.01\" />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Expense Date</Form.Label>\r\n                                    <Form.Control type=\"date\" name=\"expense_date\" value={formData.expense_date} onChange={handleInputChange} required />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Category</Form.Label>\r\n                            <Form.Select name=\"category\" value={formData.category} onChange={handleInputChange}>\r\n                                <option value=\"\">Uncategorized</option>\r\n                                {categories.map(cat => (\r\n                                    <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                                ))}\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Description</Form.Label>\r\n                            <Form.Control as=\"textarea\" rows={3} name=\"description\" value={formData.description} onChange={handleInputChange} />\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleCloseModal}>Close</Button>\r\n                    <Button variant=\"primary\" onClick={handleSubmit}>Save Changes</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            \r\n            {/* Render the new Category Manager Modal */}\r\n            <CategoryManagerModal\r\n                show={showCategoryModal}\r\n                handleClose={() => setShowCategoryModal(false)}\r\n                categories={categories}\r\n                onUpdate={fetchData}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ExpenseListPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}